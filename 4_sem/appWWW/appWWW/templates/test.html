{% extends 'base.html' %}

{% block content %}
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
google.load('visualization', '1', {'packages': ['geochart']});
google.setOnLoadCallback(drawMarkersMap);

function drawMarkersMap() {
    var jsonData = `{{ data }}`

    var data = new google.visualization.DataTable(jsonData);

    var options = {
        region: 'PL',
        dataMode: 'regions',
        displayMode: 'regions',
        resolution: 'provinces',
        legend: 'none',
        enableRegionInteractivity: 'true',
        sizeAxis: {minSize:5,  maxSize: 5},
        colorAxis: {colors: ['#B92B3D']}
    };

    var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
    chart.draw(data, options);
};
</script>

<div class="chart">
    <div class="bar" style="height: 10px;"></div>
    <div class="bar" style="height: 30px;"></div>
    <div class="bar" style="height: 90px;"></div>
</div>

<div id="chart_div" style="width: 900px; height: 500px;"></div>

<table>
    <tr>
        <th>
        </th>
        {% for c in candidates %}
        <th>
            {{ c }}
        </th>
        {% endfor %}
    </tr>
    {% for row in rows %}
    <tr>
        <td>
            {{ row.title }}
        </td>
        {% for x in row.votes %}
        <td>
            {{ "%.2f" % x|float }}%
        </td>
        {% endfor %}
    </tr>
    {% endfor %}

</table>

{% endblock %}
